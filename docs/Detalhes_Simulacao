#Detalhes_Simulacao
Detalhes da simulação:

1)	A simulação deve ser do tipo TRANSIENTE (ou as vezes INTERATIVA), previamente definindo-se a duração do fenômeno (a qual foi 1,2ms e 10us nos itens a e b, respectivamente);
2)	O pulso de largura T foi obtido usando a fonte degrau negativo ocorrendo no instante TD=6 us (“Delay time”). O instante t=0 marca o início da simulação, não sendo possível definir valores da fonte diferentes de zero para t < 0. Matematicamente, a função do tempo seria dada por V1(t) = u(t) - u(t-6) [s,V]. Porém, o tempo de subida em t=0 é nulo (não tem sentido físico), enquanto em t=6us o TR=10ns (“Rise time”: é uma descida, mas é sempre denominado TR). TR pode ser alterado mas não deve ser anulado, pois esse valor deve ter sentido físico como deve ocorrer em uma simulação. O simulador poder dar o chamado erro de “convergência” para valores muito baixos de TR;
3)	A fonte deve ser aterrada e as pontas de prova (PROBE = PR) devem medir/plotar apenas tensões de nós;
4)	A condição inicial do capacitor DEVE ser definida, nesses casos foi sempre igual a zero. Para isso, ela deve ser definida no elemento (capacitor) e, em “SIMULATION SETTINGS”, “INITIAL CONDITIONS”, deve ser escolhida a opção “User Defined” (o padrão é determinar automaticamente, e geralmente o valor de regime permanente é calculado);
5)	O circuito diferenciador com OPAMP é um circuito instável com a presença de ruídos e raramente utilizado na prática, como observado na seção 6.6.2, pág. 208 do livro-texto. Mas como estamos utilizando um simulador, é possível ajustar alguns parâmetros e observar o comportamento teórico do circuito.
O primeiro cuidado é com a tensão máxima na saída, que deve estar entre os valores definidos em Vomp e  Vomn , ajustáveis no modelo do OPAMP 3T_VIRTUAL (o mais simples e que deve ser utilizado para esse trabalho).  Se a taxa de variação na entrada é muito alta, é esperada a chamada “saturação” do OPAMP, região de operação não-linear na qual a saída só assume um dos valores definidos em Vomp/Vomn. Pode ocorrer, portanto, uma falsa conclusão de que o diferenciador está funcionando se a saída esperada oscila entre dois valores constantes, como é o caso do exemplo 6.14 (pág. 209 do livro-texto).  Além de ajustar os valores de Vomp/Vomn  para evitar a saturação, também podemos:
a.	 reduzir o valor de =RC; e/ou
b.	reduzir a taxa de variação da tensão de entrada, reduzindo a amplitude ou aumentando o período.
Algumas vezes uma rápida saturação não pode ser evitada e não constitui um problema, como numa subida ou descida de um pulso (veja acima a função degrau, parâmetro TR).
O segundo problema ocorre quando a segunda derivada da função é diferente de zero, causando uma oscilação indesejada na saída. É possível reduzir e, às vezes,  até eliminar as oscilações indesejáveis que ocorrem até estabilização no valor desejado na saída (taxa de variação do sinal de entrada). Dentre muitos ajustes possíveis, o mais eficaz em baixas frequências é simplesmente adicionar um resistor em série com a fonte de tensão, e variar seu valor até “suavizar” a transição. No caso do exemplo 6.14, encontrei o valor ideal dessa resistência em torno de 50 ohms. Se a fonte é substituída pelo pulso do P7.88 (mas com os valores de R e C do Ex. 6.14 !) com TR=10ns, a oscilação aumenta bastante e inevitavelmente o operacional vai saturar !), o valor sobe para 340m ohms.
